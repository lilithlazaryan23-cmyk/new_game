const wordCategories = {
    nature: [
        { word: "մառախուղ", hint: "Ինչպե՞ս է կոչվում մթնոլորտում առաջացող խիտ գոլորշին, որը նվազեցնում է տեսանելիությունը:" },
        { word: "հրաբուխ", hint: "Ո՞ր բնական երևույթն է ժայթքում և դուրս հանում լավա ու մոխիր։" },
        { word: "հոսանք", hint: "Ինչպե՞ս է կոչվում գետերի կամ օվկիանոսի ջրերի շարունակական շարժումը որոշակի ուղղությամբ:" },
        { word: "տարափ", hint: "Ի՞նչ երևույթ է առաջանում, երբ շատ կարճ ժամանակում տեղում է հորդառատ անձրև։" },
        { word: "սողանք", hint: "Ինչպե՞ս է կոչվում հողի կամ քարերի մեծ զանգվածի հանկարծակի տեղաշարժը լեռնալանջից։" },
        { word: "բերքառատություն", hint: "Ինչպե՞ս է կոչվում հողի որակը, երբ այն պիտանի է գյուղատնտեսության համար։" },
        { word: "օզոնայինշերտ", hint: "Ո՞րն է Երկրի մթնոլորտի այն մասը, որը պաշտպանում է մեզ արեգակնային վտանգավոր ճառագայթումից։" },
        { word: "սառցադաշտ", hint: "Ինչպե՞ս է կոչվում մեծածավալ սառույցի զանգվածը, որը դանդաղ շարժվում է։" },
        { word: "երկրաշարժ", hint: "Ինչպե՞ս է կոչվում հողի հանկարծակի ցնցումը, որը կարող է ավերածություններ առաջացնել։" },
        { word: "կենսաբազմազանություն", hint: "Ի՞նչ բառով է կոչվում որոշակի տարածքում ապրող կենդանիների և բույսերի ամբողջությունը։" }
    ],
    food: [
        { word: "կարդամոն", hint: "Ի՞նչ արևելյան համեմունք է օգտագործվում ինչպես աղի, այնպես էլ քաղցր ուտեստների մեջ՝ իր բուրավետության համար։" },
        { word: "կոճապղպեղ", hint: "Ո՞ր արմատն է հայտնի իր կծու համով և օգտագործվում թեյերում ու ուտեստներում։" },
        { word: "թրթնջուկ", hint: "Ո՞ր թթվաշ համով կանաչիի տեսակը հաճախ օգտագործվում է ապուրների և աղցանների մեջ։" },
        { word: "բուրատա", hint: "Ո՞ր իտալական պանրի տեսակն ունի փափուկ, կրեմային միջուկ և հիշեցնում է մոցարելլան։" },
        { word: "սուսամբար", hint: "Ի՞նչ բուրավետ կանաչի է հաճախ օգտագործվում մսային ուտեստների համեմման համար։" },
        { word: "գարեջուր", hint: "Ո՞ր խմիչքն է պատրաստվում գարեհացից և օգտագործվում տարբեր համերով ու տեսակներով։" },
        { word: "մանանեխ", hint: "Ի՞նչ համեմունք է պատրաստվում դեղին կամ սև սերմերից և ունի կծու համ։" },
        { word: "հալվա", hint: "Ո՞ր արևելյան քաղցրեղենն է պատրաստվում քունջութից կամ արևածաղկի սերմերից։" },
        { word: "բուսակաթ", hint: "Ի՞նչ անվանում ունի կաթի այլընտրանքը, որը ստացվում է նուշից, վարսակից կամ կոկոսից։" },
        { word: "թարխուն", hint: "Ի՞նչ կանաչի է հայտնի իր յուրահատուկ բույրով և օգտագործվում հայկական խոհանոցում ու ըմպելիքներում։" }
    ],
    music: [
        { word: "սիմֆոնիա", hint: "Ի՞նչ երաժշտական ստեղծագործություն է բազմախմբություն, որն իր մեջ ներառում է բազմաթիվ մասեր՝ առանձին կատարմամբ։" },
        { word: "կլավիշ", hint: "Ի՞նչ երաժշտական գործիքն է կազմված սպիտակ և սև բանաձևերով, որն նվագվում է մատներով։" },
        { word: "հարմոնիկա", hint: " Ի՞նչ գործիքն է փոքր, հեշտ տեղափոխվող և մեծապես օգտագործվում ժողովրդական երաժշտության մեջ։" },
        { word: "ակորդ", hint: "Ի՞նչ երաժշտական կառուցվածք է, որը կազմված է միաժամանակ հնչող երեք կամ ավելի տոնի համադրությունից։" },
        { word: "մելոդիա", hint: "Ի՞նչ երաժշտական գործիքն է ստեղծում միահյուսված, հստակ հնչող և լավ ճանաչվող առանձին երանգներ։" },
        { word: "արկեստր", hint: "Ի՞նչ երաժշտական խումբ է, որին սովորաբար կազմում են շատ նվագախմբեր՝ լարային և փչող գործիքներով։" },
        { word: "ֆուգա", hint: "Ի՞նչ երաժշտական ձևն է, որտեղ թեման կրկնվում է՝ տարբեր սարքերով և եղանակներով։" },
        { word: "կոմիտաս", hint: "Ո՞ր կոմպոզիտորի անունն է Սողոմոն Սողոմոնյան" },
        { word: "կոնցերտ", hint: "Ի՞նչ երաժշտական ստեղծագործություն է, որտեղ հիմնականում միայն մի գործիք է առանձնանում, իսկ մյուսները պահպանում են համալիրվածություն։" },
        { word: "ջազ", hint: "Ի՞նչ երաժշտության ոճը բնութագրվում է ազատ ինտերպրետացիայով, իմպրովիզացիայով և սահուն ռիթմով։" },
    ],
    technology: [
        { word: "միգրացիա", hint: "Ո՞ր երևույթն է վերաբերում մարդկանց կամ կենդանիների տեղաշարժին՝ տարածության մեջ՝ պայմանավորված տարբեր պատճառներով։" },
        { word: "կրիպտոգրաֆիա", hint: "Ի՞նչ տեխնոլոգիա է օգտագործվում տվյալների գաղտնագրման և անօրինական մուտքը կանխելու համար։" },
        { word: "կրիպտոարժույթ", hint: "Ի՞նչ թվային արժույթն է ապահովում անանուն և անվտանգ ֆինանսական տրանսակցիաներ առանց կենտրոնացված համակարգերի։" },
        { word: "վիրտուալություն", hint: "Ի՞նչ համակարգն է ստեղծում վիրտուալ միջավայր, որը չնայած իրական չի լինում, բայց կարող է զգացվել ինչպես իրական։" },
        { word: "բիոգենետիկա ", hint: "Ի՞նչ գիտաուսումնասիրությունը հետազոտում է կենդանի օրգանիզմների ժառանգական կոդը և դրա փոփոխությունները։" },
        { word: "նեյրոմորֆիզմ", hint: "Ի՞նչ տեխնոլոգիա է ընդօրինակում մարդկային նյարդային համակարգի կառուցվածքն ու գործառույթները։" },
        { word: "հիբրիդացում", hint: "Ի՞նչ գործընթացն է համատեղում տարբեր տեխնոլոգիաներ կամ համակարգեր՝ բարելավելու նրանց արդյունավետությունը։" },
        { word: "էկոհամակարգ", hint: "Ի՞նչ բառով է կոչվում բնական միջավայրի բաղադրությունը, որը ներառում է բոլոր կենդանի և ոչ կենդանի բաղադրիչները։" },
        { word: "ավտոմատացում", hint: "Ի՞նչ գործընթացը ենթադրում է մարդկային միջամտության նվազեցում՝ աշխատանքի կատարելությունը մեքենաների կամ համակարգերի միջոցով։" },
        { word: "դիջիտալացում", hint: "Ի՞նչ գործընթաց է վերաբերում տվյալների ու տեխնոլոգիաների թվայնացմանը։" },
    ],
    animals: [
        { word: "անգղ", hint: "Ի՞նչ թռչուն է հայտնի իր բարձր թռիչքով և կարողությամբ երկար հեռավորություններ թռչելու համար։" },
        { word: "պանդա", hint: "Ի՞նչ կենդանին է մշտապես բամբուկով սնվում, ունի մեծ գլուխ և աչքերի շուրջ հատուկ լույսավոր նշաններ։" },
        { word: "վագրաձի", hint: "Ո՞ր կենդանին ունի գծավոր մաշկ:" },
        { word: "կենգուրու", hint: "Ի՞նչ կենդանին է հայտնի իր ուժեղ թաթերով և մեծ պոչով, որը ցատկում է մեծ հեռավորություններ։" },
        { word: "փոսպոտոր", hint: "Ի՞նչ կենդանին է զբաղվում հիմնականում գիշերային կյանքով՝ փորելով անցքեր և կառուցելով բնապաշարներ։" },
        { word: "ձի", hint: "Ի՞նչ կենդանին է արագ, գեղեցիկ ու ուժեղ, օգտագործվում որպես տեղափոխման միջոց և սպորտում։" },
        { word: "եղնիկ", hint: "Ի՞նչ կենդանին է հայտնի իր երկար, փայլուն եղունգներով ու գեղեցիկ պոչով, վազում է դաշտերում։" },
        { word: "վիշապ", hint: "Ի՞նչ քնաբեր և առեղծվածային կենդանին է պատմական ու ֆանտաստիկ մշակույթներում՝ պարունակում հրի կամ միստիկ ուժեր։" },
        { word: "մայմոն ", hint: "Ի՞նչ կենդանին է ապրում tropic գոտիներում, ունի խելացի վարք և հիմնականում ընթանում է ծառերից ծառ։" },
        { word: "կապիկ", hint: "Ի՞նչ կենդանին է ապրում tropic գոտիներում, ունի խելացի վարք և հիմնականում ընթանում է ծառերից ծառ։" }
    ],
    sports: [
        { word: "մարաթոն ", hint: " սպորտային մրցույթ է, որտեղ մարզիկները պետք է վազեն 42.195 կմ։" },
        { word: "սնոուբորդինգ", hint: "Ի՞նչ սպորտաձև է, որտեղ մարզիկները սահում են ձյունածածկ լանջերով հատուկ տախտակի վրա։" },
        { word: "ֆենսինգ", hint: "Ի՞նչ սպորտաձև է, որտեղ մարզիկները մրցում են սուսերներով և փորձում են հարվածել միմյանց։" },
        { word: "պարաշյուտիզմ", hint: "Ի՞նչ էքստրեմալ սպորտաձև է, որտեղ մարզիկները թռչում են բարձրությունից և օգտագործում են պարաշյուտ։" },
        { word: "կայակինգ", hint: "Ի՞նչ ջրային սպորտաձև է, որտեղ մարզիկները նավարկում են նեղ ու արագաշարժ նավակով։" },
        { word: "կուրսինգ", hint: "Ի՞նչ սպորտաձև է, որտեղ շները մրցում են արագավազքում՝ հետևելով արհեստական որսին։" },
        { word: "քիքբոքսինգ", hint: "Ի՞նչ մարտական սպորտաձև է, որը համատեղում է բռնցքամարտի և ոտնային հարվածների տեխնիկան։" },
        { word: "քարլինգ", hint: "Ի՞նչ ձմեռային սպորտաձև է, որտեղ թիմերը փորձում են մետաղյա քարերը սահեցնել հատուկ նշանակված շրջանների մեջ։" },
        { word: "ջրացատկ", hint: "Ի՞նչ սպորտաձև է, որտեղ մարզիկները կատարում են բարձրությունից ջրի մեջ գեղագիտական թռիչքներ։" },
        { word: "սքեյթբորդինգ", hint: "Ի՞նչ սպորտաձև է, որտեղ մարզիկները շարժվում են փոքր անիվներով տախտակի վրա և կատարում հնարքներ։" },
    ],
    culture: [
        { word: "խաչքար", hint: "Ի՞նչ քարե հուշակոթող է հայկական մշակույթի յուրահատուկ տարրը, զարդարված խաչաձև փորագրություններով։" },
        { word: "դուդուկ", hint: "Ի՞նչ հայկական ազգային երաժշտական գործիք է պատրաստվում ծիրանենուց և ունի մեղմ, հուզիչ ձայն։" },
        { word: "լավաշ", hint: "Ի՞նչ հայկական ավանդական հաց է բարակ, փափուկ և թխվում է թոնրում։" },
        { word: "տարազ", hint: "Ի՞նչ է կոչվում հայկական ավանդական հագուստը, որը կրում էին տարբեր շրջանների բնակիչները։" },
        { word: "քարահունջ", hint: "Ի՞նչ հայկական մեգալիթյան կառույց է հաճախ համեմատվում բրիտանական Սթոունհենջի հետ։" },
        { word: "թառ", hint: "Ի՞նչ լարային երաժշտական գործիք է հայկական մշակույթում, որը լայն տարածում ունի Կովկասում։ " },
        { word: "վերնիսաժ", hint: "Ի՞նչ է կոչվում Երևանի հայտնի բացօթյա շուկան, որտեղ վաճառում են հայկական ձեռագործ աշխատանքներ և հուշանվերներ։" },
        { word: "մատենադարան", hint: "Ի՞նչ անունով է հայտնի հայկական հին ձեռագրերի պահոցը, որը համարվում է մշակութային և գիտական կենտրոն։" },
        { word: "քոչարի", hint: "Ի՞նչ հայկական ազգային պար է, որը բնորոշվում է հուժկու ու ռազմատենչ շարժումներով։" },
        { word: "տոլմա", hint: "Ի՞նչ հայկական ավանդական ուտեստ է, որը պատրաստվում է խաղողի տերևով փաթաթված մսով կամ բուսական միջուկով։" },
    ],
    matem: [
        { word: "ալգորիթմ", hint: "Ի՞նչ կարգավորված քայլերի հաջորդականություն է, որը կիրառվում է խնդիրների լուծման համար։" },
        { word: "մատրիցա", hint: "Ի՞նչ թվային կամ այլ տվյալների դասավորվածություն է ուղղահայաց ու հորիզոնական տողերով։" },
        { word: "անհայտ ", hint: "Ի՞նչ անունով է կոչվում մաթեմատիկական հավասարման այն տարրը, որը պետք է գտնվի։" },
        { word: "ածանցյալ", hint: "Ի՞նչ մաթեմատիկական հասկացություն է արտահայտում ֆունկցիայի փոփոխության արագությունը տվյալ կետում։" },
        { word: "ինտեգրալ", hint: "Ի՞նչ մաթեմատիկական գործողություն է օգտագործվում մակերեսների հաշվարկման և կուտակման խնդիրների լուծման համար։" },
        { word: "վեկտոր", hint: "Ի՞նչ մաթեմատիկական միավոր է, որը բնութագրվում է ուղղությամբ և մեծությամբ։" },
        { word: "կոմբինատորիկա", hint: "Ի՞նչ մաթեմատիկական ճյուղ է ուսումնասիրում տարրերի դասավորությունների և համակցությունների հաշվարկը։" },
        { word: "պարաբոլա ", hint: "Ի՞նչ է կոչվում երկրորդ աստիճանի գրաֆիկը, որը կարող է լինել բացվող կամ փակվող կոր։" },
        { word: "արձանագրություն", hint: "Ի՞նչ մաթեմատիկական գործողություն է պարունակում բանաձևեր և թվային հավասարություններ՝ որևէ մեթոդ ապացուցելու համար։" },
        { word: "լոգարիթմ", hint: "Ի՞նչ մաթեմատիկական գործողություն է, որը թույլ է տալիս գտնել որևէ թվի հիմքի աստիճանը։" },
    ],
    gitnakanner: [
        { word: "այնշտայն", hint: "Ո՞ր գիտնականը ձևակերպեց հարաբերականության տեսությունը։" },
        { word: "նյուտոն", hint: "Ո՞ր ֆիզիկոսն է ձևակերպել ձգողության համընդհանուր օրենքը և շարժման երեք օրենքները։" },
        { word: "տեսլա", hint: "Ո՞ր գյուտարարն ու ֆիզիկոսն է զարգացրել փոփոխական հոսանքի համակարգը և հայտնի է իր էլեկտրատեխնիկական գյուտերով։" },
        { word: "գալիլեյ", hint: "Ո՞ր գիտնականը պաշտպանեց հելիոցենտրիկ տեսությունը և կատարելագործեց աստղադիտակը։" },
        { word: "կյուրի", hint: "Ո՞ր կին գիտնականն է առաջինը ստացել Նոբելյան մրցանակ երկու տարբեր ոլորտներում՝ ֆիզիկայում և քիմիայում։" },
        { word: "դարվին", hint: "Ո՞ր գիտնականն է առաջարկել էվոլյուցիայի տեսությունը և բնական ընտրության սկզբունքը։" },
        { word: "պաստեր", hint: "Ո՞ր կենսաքիմիկոսն է ստեղծել պատվաստման և պաստերիզացման մեթոդները՝ կանխելով վարակիչ հիվանդությունները։" },
        { word: "մենդելեև", hint: "Ո՞ր գիտնականն է ստեղծել քիմիական տարրերի պարբերական աղյուսակը։" },
        { word: "շրյոդինգեր", hint: "Ո՞ր ֆիզիկոսն է հայտնի քվանտային մեխանիկայի հիմնարար մոդելներով և իր հայտնի '*********' կատու մտահանգմամբ։" },
        { word: "հոքինգ", hint: "Ո՞ր տեսական ֆիզիկոսն է ուսումնասիրել սև խոռոչները և գրել հանրահայտ «Ժամանակի համառոտ պատմություն» գիրքը։" },
    ],
    trch: [
        { word: "արծիվ", hint: "Ո՞ր թռչունն է հայտնի իր սուր տեսողությամբ և համարվում է ուժի ու ազատության խորհրդանիշ։" },
        { word: "բու", hint: "Ո՞ր գիշերային թռչունն է հայտնի իր խելացիությամբ և գլուխը գրեթե 360 աստիճան պտտելու կարողությամբ։" },
        { word: "ալբատրոս", hint: "Ո՞ր թռչունն է ունի ամենամեծ թևերի բացվածքը և կարող է ամիսներ շարունակ թռչել առանց վայրէջքի։" },
        { word: "կռունկ", hint: "Ո՞ր թռչունն է խորհրդանշում հավատարմությունը, քանի որ կյանքի ընթացքում ունի միայն մեկ զուգընկեր։" },
        { word: "կաչաղակ", hint: "Ո՞ր թռչունն է հայտնի իր խելամտությամբ և կարողությամբ ճանաչել իրեն հայելու մեջ։" },
        { word: "փասյան", hint: "Ո՞ր թռչունն է աչքի ընկնում իր վառ գույնի փետուրներով և հաճախ համարվում է ազնվականության խորհրդանիշ։" },
        { word: "սոխակ", hint: "Ո՞ր փոքրիկ թռչունն է հայտնի իր մելոդիկ երգով, որը հաճախ օգտագործվում է պոեզիայում։" },
        { word: "ձկնկուլ", hint: "Ո՞ր ջրային թռչունն է սնվում հիմնականում ձկներով և ունի երկար, նեղ կտուց։" },
        { word: "կեռնեխ", hint: "Ո՞ր թռչունն է ճանաչվում իր դեղնավուն փորով և հաճախ հանդիպում է այգիներում։" },
        { word: "սևաձի", hint: "Ո՞ր թռչունն է խորհրդանշում խավարն ու խորհրդավորությունը և հաճախ կապված է ժողովրդական հավատալիքների հետ։" },
    ],
    auto: [
        { word: "շարժիչ", hint: "Ի՞նչ մաս է ավտոմեքենայի, որը արտադրում է շարժման էներգիա։" },
        { word: "տրանսմիսիա", hint: "Ի՞նչ համակարգ է ավտոմեքենայում, որը փոխանցում է շարժիչի էներգիան անիվներին։" },
        { word: "ադմիստրատոր", hint: "Ի՞նչ համակարգ է օգտագործվում ավտոմեքենայում, որն ապահովում է կառավարման կենտրոնը։" },
        { word: "բալոն", hint: "Ի՞նչ մաս է ավտոմեքենայի, որը պահպանում է շրջապատի հետ կապի և աշխատանքային ճնշման բարձրությունը։" },
        { word: "ելեկտրամոտոր", hint: "Ի՞նչ մաս է օգտագործվում էլեկտրական շարժման համակարգերում։" },
        { word: "պատվար", hint: "Ի՞նչ մաս է հանդիսանում ավտոմեքենայի կողային պաշտպանությունը բախումների դեպքում։" },
        { word: "ֆիլտր", hint: "Ի՞նչ սարք է ավտոմեքենայի շարժիչում, որը թույլ է տալիս մաքրելու օդը կամ վառելիքը։" },
        { word: "թրթուռ", hint: "Ի՞նչ տրանսպորտային միջոցի մաս է, որը օգնում է տեղափոխել մեքենան առանց մեծ մղման կորուստների։" },
        { word: "լամպ", hint: "Ի՞նչ ավտոմեքենայի մաս է ապահովում լուսավորությունը ցերեկային ու գիշերային պայմաններում։" },
        { word: "անվադող", hint: "Ի՞նչ մաս է ավտոմեքենայի, որը ապահովում է կպչում ճանապարհին և թույլ է տալիս մեքենային շարժվել։" },
    ]
};


const armenianAlphabet = "աբգդեզէըթժիլխծկհձղճմյնշոչպջռսվտրցուփքօֆ".split("");
let selectedWord = "", selectedHint = "", correctLetters = [], wrongLetters = [], gameOver = false;
let wins = 0, currentStep = 1;

function playSound(id) {
    const audio = document.getElementById(id);
    if (audio) { audio.currentTime = 0; audio.play().catch(() => {}); }
}

function getRandomWord() {
    const category = document.getElementById("category").value;
    let pool = [];
    if (category === "all") {
        Object.values(wordCategories).forEach(arr => pool = pool.concat(arr));
    } else {
        pool = wordCategories[category] || [];
    }
    // Եթե բառ չկա, որպեսզի սխալ չտա (undefined), վերադարձնում ենք default
    return pool.length > 0 ? pool[Math.floor(Math.random() * pool.length)] : {word: "հայաստան", hint: "Մեր երկիրը"};
}

function updateDisplay() {
    document.getElementById("word").innerText = selectedWord
        .split("")
        .map(l => correctLetters.includes(l) ? l : "_")
        .join(" ");

    document.getElementById("hint-text").innerText = selectedHint;
    document.getElementById("wrong-letters").innerText = wrongLetters.join(", ");

    const parts = document.querySelectorAll(".figure-part");
    parts.forEach((p, i) => p.style.display = i < wrongLetters.length ? "block" : "none");

    if (wrongLetters.length >= parts.length) {
        document.getElementById("message").innerHTML = `<span style="color:#ff7675">Պարտություն: Բառն էր՝ ${selectedWord}</span>`;
        gameOver = true;
        playSound("lose-sound");
    }
}

function handleInput(letter, keyEl) {
    if (gameOver || correctLetters.includes(letter) || wrongLetters.includes(letter)) return;

    if (selectedWord.includes(letter)) {
        correctLetters.push(letter);
        playSound("correct-sound");
    } else {
        wrongLetters.push(letter);
        playSound("wrong-sound");
    }
    if (keyEl) keyEl.classList.add("used");
    updateDisplay();
    checkWin();
}

function checkWin() {
    if (selectedWord.split("").every(l => correctLetters.includes(l))) {
        document.getElementById("message").innerHTML = `<span style="color:#55efc4">Հրաշալի է: Հաղթանակ:</span>`;
        gameOver = true;
        wins++;
        document.getElementById("wins").innerText = wins;
        confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
        playSound("win-sound");
        if (currentStep < 10) document.getElementById("next-word").classList.remove("hidden");
    }
}

function start() {
    const obj = getRandomWord();
    selectedWord = obj.word;
    selectedHint = obj.hint;
    correctLetters = []; wrongLetters = []; gameOver = false;
    document.getElementById("category-selection").classList.add("hidden");
    document.getElementById("game-container").classList.remove("hidden");
    document.getElementById("next-word").classList.add("hidden");
    document.getElementById("message").innerText = "";
    
    const kb = document.getElementById("keyboard");
    kb.innerHTML = "";
    armenianAlphabet.forEach(l => {
        const d = document.createElement("div");
        d.className = "key"; d.innerText = l;
        d.onclick = () => handleInput(l, d);
        kb.appendChild(d);
    });
    updateDisplay();
}

document.getElementById("start-game").onclick = start;
document.getElementById("next-word").onclick = () => { currentStep++; document.getElementById("step").innerText = currentStep; start(); };
document.getElementById("play-again").onclick = () => location.reload();